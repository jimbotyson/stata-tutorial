<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Selecting | Data Manipulation and Analysis in R</title>
  <meta name="description" content="10 Selecting | Data Manipulation and Analysis in R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Selecting | Data Manipulation and Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="jimbotyson/RTutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Selecting | Data Manipulation and Analysis in R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="generating-new-values-and-recoding-existing-values.html"/>
<link rel="next" href="labelling.html"/>
<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>




</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i><b>2</b> Acknowledgments</a></li>
<li class="chapter" data-level="3" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a>
<ul>
<li class="chapter" data-level="3.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>3.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.2" data-path="getting-started.html"><a href="getting-started.html#software-requirements"><i class="fa fa-check"></i><b>3.2</b> Software Requirements</a></li>
<li class="chapter" data-level="3.3" data-path="getting-started.html"><a href="getting-started.html#how-to-use-these-materials"><i class="fa fa-check"></i><b>3.3</b> How to use these materials</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="getting-started.html"><a href="getting-started.html#the-larger-exercises"><i class="fa fa-check"></i><b>3.3.1</b> The Larger Exercises</a></li>
<li class="chapter" data-level="3.3.2" data-path="getting-started.html"><a href="getting-started.html#skippable"><i class="fa fa-check"></i><b>3.3.2</b> Skippable</a></li>
<li class="chapter" data-level="3.3.3" data-path="getting-started.html"><a href="getting-started.html#general-advice"><i class="fa fa-check"></i><b>3.3.3</b> General advice</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="getting-started.html"><a href="getting-started.html#data"><i class="fa fa-check"></i><b>3.4</b> Data</a></li>
<li class="chapter" data-level="3.5" data-path="getting-started.html"><a href="getting-started.html#reference-material"><i class="fa fa-check"></i><b>3.5</b> Reference material</a></li>
<li class="chapter" data-level="3.6" data-path="getting-started.html"><a href="getting-started.html#to-be-added"><i class="fa fa-check"></i><b>3.6</b> To be added</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="some-r-use-basics.html"><a href="some-r-use-basics.html"><i class="fa fa-check"></i><b>4</b> Some R use basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="some-r-use-basics.html"><a href="some-r-use-basics.html#folders"><i class="fa fa-check"></i><b>4.1</b> Folders</a></li>
<li class="chapter" data-level="4.2" data-path="some-r-use-basics.html"><a href="some-r-use-basics.html#exercise"><i class="fa fa-check"></i><b>4.2</b> Exercise</a></li>
<li class="chapter" data-level="4.3" data-path="some-r-use-basics.html"><a href="some-r-use-basics.html#exercise-1"><i class="fa fa-check"></i><b>4.3</b> Exercise</a></li>
<li class="chapter" data-level="4.4" data-path="some-r-use-basics.html"><a href="some-r-use-basics.html#common-file-types"><i class="fa fa-check"></i><b>4.4</b> Common File types</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-r-file.html"><a href="the-r-file.html"><i class="fa fa-check"></i><b>5</b> The R file</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-r-file.html"><a href="the-r-file.html#initialising-your-script"><i class="fa fa-check"></i><b>5.1</b> Initialising your script</a></li>
<li class="chapter" data-level="5.2" data-path="the-r-file.html"><a href="the-r-file.html#exercise-2"><i class="fa fa-check"></i><b>5.2</b> Exercise</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="the-r-file.html"><a href="the-r-file.html#solution"><i class="fa fa-check"></i><b>5.2.1</b> Solution</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-r-file.html"><a href="the-r-file.html#which-directory"><i class="fa fa-check"></i><b>5.3</b> Which directory?</a></li>
<li class="chapter" data-level="5.4" data-path="the-r-file.html"><a href="the-r-file.html#change-to-your-data-directory"><i class="fa fa-check"></i><b>5.4</b> Change to your data directory</a></li>
<li class="chapter" data-level="5.5" data-path="the-r-file.html"><a href="the-r-file.html#exercise-3"><i class="fa fa-check"></i><b>5.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dataset.html"><a href="dataset.html"><i class="fa fa-check"></i><b>6</b> Dataset</a>
<ul>
<li class="chapter" data-level="6.1" data-path="dataset.html"><a href="dataset.html#data-types"><i class="fa fa-check"></i><b>6.1</b> Data Types</a></li>
<li class="chapter" data-level="6.2" data-path="dataset.html"><a href="dataset.html#interpretation-of-describe-output"><i class="fa fa-check"></i><b>6.2</b> Interpretation of <code>describe</code> output</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="dataset.html"><a href="dataset.html#storage-type"><i class="fa fa-check"></i><b>6.2.1</b> Storage type</a></li>
<li class="chapter" data-level="6.2.2" data-path="dataset.html"><a href="dataset.html#format-types"><i class="fa fa-check"></i><b>6.2.2</b> Format types</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="dataset.html"><a href="dataset.html#interpretation-of-codebook"><i class="fa fa-check"></i><b>6.3</b> Interpretation of codebook</a></li>
<li class="chapter" data-level="6.4" data-path="dataset.html"><a href="dataset.html#exercise-4"><i class="fa fa-check"></i><b>6.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="listing-and-sorting.html"><a href="listing-and-sorting.html"><i class="fa fa-check"></i><b>7</b> Listing and Sorting</a>
<ul>
<li class="chapter" data-level="7.1" data-path="listing-and-sorting.html"><a href="listing-and-sorting.html#listing-cases"><i class="fa fa-check"></i><b>7.1</b> Listing cases</a></li>
<li class="chapter" data-level="7.2" data-path="listing-and-sorting.html"><a href="listing-and-sorting.html#exercise-5"><i class="fa fa-check"></i><b>7.2</b> Exercise</a></li>
<li class="chapter" data-level="7.3" data-path="listing-and-sorting.html"><a href="listing-and-sorting.html#sorting"><i class="fa fa-check"></i><b>7.3</b> Sorting</a></li>
<li class="chapter" data-level="7.4" data-path="listing-and-sorting.html"><a href="listing-and-sorting.html#gsort"><i class="fa fa-check"></i><b>7.4</b> <code>gsort</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="detecting-and-correcting.html"><a href="detecting-and-correcting.html"><i class="fa fa-check"></i><b>8</b> Detecting and correcting</a>
<ul>
<li class="chapter" data-level="8.1" data-path="detecting-and-correcting.html"><a href="detecting-and-correcting.html#exercise-6"><i class="fa fa-check"></i><b>8.1</b> Exercise</a></li>
<li class="chapter" data-level="8.2" data-path="detecting-and-correcting.html"><a href="detecting-and-correcting.html#exercise-7"><i class="fa fa-check"></i><b>8.2</b> Exercise</a></li>
<li class="chapter" data-level="8.3" data-path="detecting-and-correcting.html"><a href="detecting-and-correcting.html#replacing-values"><i class="fa fa-check"></i><b>8.3</b> Replacing values</a></li>
<li class="chapter" data-level="8.4" data-path="detecting-and-correcting.html"><a href="detecting-and-correcting.html#exercise-8"><i class="fa fa-check"></i><b>8.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="generating-new-values-and-recoding-existing-values.html"><a href="generating-new-values-and-recoding-existing-values.html"><i class="fa fa-check"></i><b>9</b> Generating new values and recoding existing values</a>
<ul>
<li class="chapter" data-level="9.1" data-path="generating-new-values-and-recoding-existing-values.html"><a href="generating-new-values-and-recoding-existing-values.html#new-values"><i class="fa fa-check"></i><b>9.1</b> New values</a></li>
<li class="chapter" data-level="9.2" data-path="generating-new-values-and-recoding-existing-values.html"><a href="generating-new-values-and-recoding-existing-values.html#exercise-9"><i class="fa fa-check"></i><b>9.2</b> Exercise</a></li>
<li class="chapter" data-level="9.3" data-path="generating-new-values-and-recoding-existing-values.html"><a href="generating-new-values-and-recoding-existing-values.html#recoding-values"><i class="fa fa-check"></i><b>9.3</b> Recoding values</a></li>
<li class="chapter" data-level="9.4" data-path="generating-new-values-and-recoding-existing-values.html"><a href="generating-new-values-and-recoding-existing-values.html#exercise-10"><i class="fa fa-check"></i><b>9.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="selecting.html"><a href="selecting.html"><i class="fa fa-check"></i><b>10</b> Selecting</a>
<ul>
<li class="chapter" data-level="10.1" data-path="selecting.html"><a href="selecting.html#selecting-variables"><i class="fa fa-check"></i><b>10.1</b> Selecting variables</a></li>
<li class="chapter" data-level="10.2" data-path="selecting.html"><a href="selecting.html#exercise-11"><i class="fa fa-check"></i><b>10.2</b> Exercise</a></li>
<li class="chapter" data-level="10.3" data-path="selecting.html"><a href="selecting.html#selecting-cases"><i class="fa fa-check"></i><b>10.3</b> Selecting cases</a></li>
<li class="chapter" data-level="10.4" data-path="selecting.html"><a href="selecting.html#using-a-filter-variable"><i class="fa fa-check"></i><b>10.4</b> Using a filter variable</a></li>
<li class="chapter" data-level="10.5" data-path="selecting.html"><a href="selecting.html#the-uses-of-_all"><i class="fa fa-check"></i><b>10.5</b> The uses of _all</a></li>
<li class="chapter" data-level="10.6" data-path="selecting.html"><a href="selecting.html#exercise-12"><i class="fa fa-check"></i><b>10.6</b> Exercise</a></li>
<li class="chapter" data-level="10.7" data-path="selecting.html"><a href="selecting.html#creating-a-custom-variable-list"><i class="fa fa-check"></i><b>10.7</b> Creating a custom variable list</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="labelling.html"><a href="labelling.html"><i class="fa fa-check"></i><b>11</b> Labelling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="labelling.html"><a href="labelling.html#variables"><i class="fa fa-check"></i><b>11.1</b> Variables</a></li>
<li class="chapter" data-level="11.2" data-path="labelling.html"><a href="labelling.html#exercise-13"><i class="fa fa-check"></i><b>11.2</b> Exercise</a></li>
<li class="chapter" data-level="11.3" data-path="labelling.html"><a href="labelling.html#values"><i class="fa fa-check"></i><b>11.3</b> Values</a></li>
<li class="chapter" data-level="11.4" data-path="labelling.html"><a href="labelling.html#exercise-14"><i class="fa fa-check"></i><b>11.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="some-exploratory-analysis.html"><a href="some-exploratory-analysis.html"><i class="fa fa-check"></i><b>12</b> Some exploratory analysis</a>
<ul>
<li class="chapter" data-level="12.1" data-path="some-exploratory-analysis.html"><a href="some-exploratory-analysis.html#simple-visualisations"><i class="fa fa-check"></i><b>12.1</b> Simple visualisations</a></li>
<li class="chapter" data-level="12.2" data-path="some-exploratory-analysis.html"><a href="some-exploratory-analysis.html#exercise-15"><i class="fa fa-check"></i><b>12.2</b> Exercise</a></li>
<li class="chapter" data-level="12.3" data-path="some-exploratory-analysis.html"><a href="some-exploratory-analysis.html#summary-statistics"><i class="fa fa-check"></i><b>12.3</b> Summary statistics</a></li>
<li class="chapter" data-level="12.4" data-path="some-exploratory-analysis.html"><a href="some-exploratory-analysis.html#exercise-16"><i class="fa fa-check"></i><b>12.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#tables-with-custom-statistics"><i class="fa fa-check"></i><b>13.1</b> Tables with custom statistics</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#customized-tables"><i class="fa fa-check"></i><b>13.2</b> Customized tables</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#a-tabulation-with-customized-layout"><i class="fa fa-check"></i><b>13.2.1</b> A <strong>tabulation</strong> with customized layout</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html"><i class="fa fa-check"></i><b>14</b> Some simple graph scripts</a>
<ul>
<li class="chapter" data-level="14.1" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#introduction-1"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#what-will-you-learn"><i class="fa fa-check"></i><b>14.2</b> What will you learn?</a></li>
<li class="chapter" data-level="14.3" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#exercise-17"><i class="fa fa-check"></i><b>14.3</b> Exercise</a></li>
<li class="chapter" data-level="14.4" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#basic-types-of-r-graph"><i class="fa fa-check"></i><b>14.4</b> Basic types of R graph</a></li>
<li class="chapter" data-level="14.5" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#the-basic-graph-command-and-some-simple-examples"><i class="fa fa-check"></i><b>14.5</b> The basic <code>graph</code> command and some simple examples</a></li>
<li class="chapter" data-level="14.6" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#exercise-18"><i class="fa fa-check"></i><b>14.6</b> Exercise</a></li>
<li class="chapter" data-level="14.7" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#creating-a-graph-adding-elements-and-changing-defaults-box-plot-example"><i class="fa fa-check"></i><b>14.7</b> Creating a graph adding elements and changing defaults: box plot example</a></li>
<li class="chapter" data-level="14.8" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#exercise-19"><i class="fa fa-check"></i><b>14.8</b> Exercise</a></li>
<li class="chapter" data-level="14.9" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#adornments"><i class="fa fa-check"></i><b>14.9</b> Adornments</a></li>
<li class="chapter" data-level="14.10" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#exercise-20"><i class="fa fa-check"></i><b>14.10</b> Exercise</a></li>
<li class="chapter" data-level="14.11" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#subset-the-data"><i class="fa fa-check"></i><b>14.11</b> Subset the data</a></li>
<li class="chapter" data-level="14.12" data-path="some-simple-graph-scripts.html"><a href="some-simple-graph-scripts.html#exporting-the-graph-to-word-from-your-script"><i class="fa fa-check"></i><b>14.12</b> Exporting the graph to Word from your script</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="larger-exercises-part-i.html"><a href="larger-exercises-part-i.html"><i class="fa fa-check"></i><b>15</b> Larger Exercises Part I</a></li>
<li class="chapter" data-level="16" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html"><i class="fa fa-check"></i><b>16</b> Hypothesis tests</a>
<ul>
<li class="chapter" data-level="16.1" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#for-two-categorical-variables"><i class="fa fa-check"></i><b>16.1</b> For two categorical variables</a></li>
<li class="chapter" data-level="16.2" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-21"><i class="fa fa-check"></i><b>16.2</b> Exercise</a></li>
<li class="chapter" data-level="16.3" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#for-one-continuous-and-one-categorical-variable-of-two-levels"><i class="fa fa-check"></i><b>16.3</b> For one continuous and one categorical variable of two levels</a></li>
<li class="chapter" data-level="16.4" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-22"><i class="fa fa-check"></i><b>16.4</b> Exercise</a></li>
<li class="chapter" data-level="16.5" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#the-paired-samples-ttest"><i class="fa fa-check"></i><b>16.5</b> The paired samples ttest</a></li>
<li class="chapter" data-level="16.6" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#once-continuous-and-one-categorical-variable-of-more-than-two-levels"><i class="fa fa-check"></i><b>16.6</b> Once continuous and one categorical variable of more than two levels</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#one-way-anova-and-post-hoc-testing"><i class="fa fa-check"></i><b>16.6.1</b> One way ANOVA and post-hoc testing</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#two-continuous-variables"><i class="fa fa-check"></i><b>16.7</b> Two continuous variables</a></li>
<li class="chapter" data-level="16.8" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#correlation"><i class="fa fa-check"></i><b>16.8</b> Correlation</a></li>
<li class="chapter" data-level="16.9" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-23"><i class="fa fa-check"></i><b>16.9</b> Exercise</a>
<ul>
<li class="chapter" data-level="16.9.1" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#simple-visualisation-of-correlation"><i class="fa fa-check"></i><b>16.9.1</b> Simple visualisation of correlation</a></li>
</ul></li>
<li class="chapter" data-level="16.10" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-24"><i class="fa fa-check"></i><b>16.10</b> Exercise</a></li>
<li class="chapter" data-level="16.11" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#simple-linear-regression"><i class="fa fa-check"></i><b>16.11</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="16.12" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-25"><i class="fa fa-check"></i><b>16.12</b> Exercise</a></li>
<li class="chapter" data-level="16.13" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#multiple-linear-regression"><i class="fa fa-check"></i><b>16.13</b> Multiple linear regression</a></li>
<li class="chapter" data-level="16.14" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-26"><i class="fa fa-check"></i><b>16.14</b> Exercise</a></li>
<li class="chapter" data-level="16.15" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#regression-with-categorical-variables"><i class="fa fa-check"></i><b>16.15</b> Regression with categorical variables</a></li>
<li class="chapter" data-level="16.16" data-path="hypothesis-tests.html"><a href="hypothesis-tests.html#exercise-27"><i class="fa fa-check"></i><b>16.16</b> Exercise</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Manipulation and Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="selecting" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Selecting<a href="selecting.html#selecting" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Selection of either variables or cases in R is often presented as applied to a single command or procedure. So, we use a list of variables after a command name and we may or may not then apply some criterion to filter the cases displayed. This works. It is however needlessly repetitive and sometimes we should consider</p>
<ul>
<li>temporarily reducing the data set in memory and operating over all data;</li>
<li>creating a <strong>filter</strong> variable to reduce complex selection expressions.</li>
</ul>
<p>In what follows I mainly treat selecting data in the “traditional” way, but I will suggest that judicious use of <code>restore</code>and <code>preserve</code> as well as the practice of storing selection criteria in <em>filter variables</em> can improve your R experience.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div id="selecting-variables" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Selecting variables<a href="selecting.html#selecting-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will use the command <code>list</code> which displays rows of variable values to illustrate the selection of variables.</p>
<p>With most commands, variables can be included in the <em>varlist</em> that follows a command name. So on the command line we can type</p>
<pre><code>list maths english history</code></pre>
<p>which displays all the values for those three variables. Much of the time this is the only selection of variables you need.</p>
<p>But, there are times when you wish to select a subset of variables for manipulation perhaps for a series of operations. In this case we can use <code>preserve</code> and <code>restore</code>.</p>
<p>The command <code>preserve</code> takes a snapshot of a data set. If we then manipulate or modify the data, we can return to the snapshot state with the command <code>restore</code>. You can now use <code>drop varlist</code> to remove variables from the workplace or <code>keep varlist</code> to specify variables to be kept in the work space.</p>
</div>
<div id="exercise-11" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Exercise<a href="selecting.html#exercise-11" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use the <code>preserve</code> command to take a snapshot of your data and then drop the variables <code>surname</code> and <code>sex</code>. List the first ten observations in your data. Use <code>restore</code> to return to your original data. List the first ten observations in your data. Describe to your rubber duck<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> the effect of <code>preserve</code> and <code>restore</code>.</p>
<!-- R has a built in *macro* (R speak for a script variable) named **\_all** that contains all the variable names currently in memory. -->
</div>
<div id="selecting-cases" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Selecting cases<a href="selecting.html#selecting-cases" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you need to select cases, that is rows from your data, you should use the <code>if</code> operator in your command. We will use <code>list</code> again to illustrate. Type the following on the console</p>
<pre><code> list surname english maths if english &gt; 60 &amp; maths &lt; 50</code></pre>
<p>We can add wildcards to our selection criteria using regular expressions. To do this we use R’s <strong>regexm()</strong> function. The following example illustrates the use of <strong>regexm()</strong>in a compound condition on <code>list</code> <a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> .</p>
<pre><code>list surname english maths if !regexm(surname,&quot;\^B&quot;) &amp; english \&gt; 60 &amp; maths \&lt; 60</code></pre>
</div>
<div id="using-a-filter-variable" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Using a filter variable<a href="selecting.html#using-a-filter-variable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A filter variable is a variable created to indicate membership of a sub-group of your data. Using the <code>generate</code> command with <code>if</code> conditions you can reduce a complex selection operation to a simpler expression. For example, suppose that you wish to select cases where</p>
<ul>
<li>class is three;</li>
<li>maths is less than 55;</li>
<li>history is greater 55.</li>
</ul>
<p>If we first try with a list command, we will write</p>
<pre><code>list if class == 3 &amp; maths &lt; 55 &amp; history &gt; 55</code></pre>
<p>You should find that this lists just three cases. If we want to continually operate over just these cases for some part of our analysis then rather than writing this complex expression each time, we can generate a variable to act as a filter</p>
<pre><code>generate filtervar = 1 if class === 3 &amp; maths &lt; 55 &amp; history &gt; 55</code></pre>
<p>and now the selection condition for further operations is reduced to</p>
<pre><code>if filtervar == 1</code></pre>
<p>This method requires some discipline to remove filter variables (with <code>drop</code>) when their work is done.</p>
</div>
<div id="the-uses-of-_all" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> The uses of _all<a href="selecting.html#the-uses-of-_all" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R has a built in <em>macro</em> (R speak for a script variable) named <strong>_all</strong> that contains all the variable names currently in memory.</p>
<p>The <code>_all</code> macro is obviously useful. but, it can be more useful combined with <code>drop</code> and <code>keep</code>. The command <code>drop varlist</code> removes variables from the workspace, while <code>keep varlist</code> drops all but the named variables.</p>
<p>So, if we want to produce summary statistics for all continuous variables in our data, we can use <code>keep</code> followed by the list of names and then calculate the summaries for <code>_all</code>.</p>
</div>
<div id="exercise-12" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Exercise<a href="selecting.html#exercise-12" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Add the following lines to your script</p>
<pre><code>    preserve
    keep maths english history
    summarize _all
    restore</code></pre>
<p>What is the effect of these lines?</p>
<p>How many variables are in working memory after the <code>keep</code> command? How many variables are in working memory after the <code>restore</code> command?</p>
<p>Add the following lines to your script</p>
<pre><code>preserve
keep maths english history
tabstat _all, statistics(mean sd var kurt skew)
restore</code></pre>
<p>Answer these questions:</p>
<ol style="list-style-type: decimal">
<li>What is the Skewness of the <strong>mathematics</strong> scores?</li>
<li>Which scores show more variability, <strong>English</strong> or <strong>History</strong>?</li>
<li>Which subject has the lowest mean score?</li>
</ol>
</div>
<div id="creating-a-custom-variable-list" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Creating a custom variable list<a href="selecting.html#creating-a-custom-variable-list" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Since many commands take a list of variables to operate on, it can be useful to create a specific list of variables that you can easily refer to repeatedly. We will do this with a R macro. R macros are programming variables or, if you prefer, containers for text. R has both local and global macros and for the most part you will use local macros in your scripts.</p>
<p>Add the following lines to your script</p>
<pre><code>local conts maths english history
summarize `conts&#39;</code></pre>
<p>Since in this case we don’t drop any variables, we don’t need to use <code>preserve</code> and <code>restore</code> to work on a subset of our data unless we otherwise transform any values.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p><a href="https://www.R.com/support/faqs/data-management/selecting-subset-of-observations/" title="How do I select a subset of observations using a complicated criterion?">How do I select a subset of observations using a complicated criterion?</a><a href="selecting.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Your rubber duck may be an actual rubber duck and it may require some imagination to talk to your duck about R, but it will work! Alternatively, you may have a learning partner or study buddy and you can exploit them to listen to your explanation.<a href="selecting.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://www.R.com/support/faqs/data-management/regular-expressions/" title="What are regular expressions and how can I use them in R?">What are regular expressions and how can I use them in R?</a><a href="selecting.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="generating-new-values-and-recoding-existing-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="labelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

</body>

</html>
